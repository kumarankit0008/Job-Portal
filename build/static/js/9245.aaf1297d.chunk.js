"use strict";(self.webpackChunktalent_recruiter=self.webpackChunktalent_recruiter||[]).push([[9245],{5493:function(e,s,a){a.r(s),a.d(s,{default:function(){return N}});var t=a(885),r=a(2791),l=a(6355),n=a(9276),i={role:"admin"},c=n.q.injectEndpoints({endpoints:function(e){return{adminGetUsers:e.query({query:function(e){var s=e.email,a=e.role,t=e.page,r=e.limit;return{url:"/api/admin/get-users?email=".concat(s,"&role=").concat(a,"&page=").concat(t,"&limit=").concat(r),method:"GET",headers:i}},providesTags:["adminUsers"]}),adminUpdateUser:e.mutation({query:function(e){var s=e.id,a=e.role;return{url:"/api/admin/update-user-role/".concat(s),method:"PATCH",body:{role:a},headers:i}}}),adminWarningUser:e.mutation({query:function(e){return{url:"api/admin/warning-user",method:"POST",body:{email:e},headers:i}}}),adminDeleteUser:e.mutation({query:function(e){return{url:"api/admin/delete-user/".concat(e),method:"DELETE",headers:i}},invalidatesTags:["adminUsers"]})}}}),d=c.useAdminGetUsersQuery,o=c.useAdminWarningUserMutation,u=c.useAdminUpdateUserMutation,m=c.useAdminDeleteUserMutation,x=a(3298),h=a(5455),p=a(828),j=a(9085),f=a(643),v=a(184),g=function(e){var s=e.user||{},a=s._id,l=s.name,n=s.email,i=s.role,c=(0,r.useState)(""),d=(0,t.Z)(c,2),x=d[0],g=d[1],N=(0,r.useState)({status:!1,role:""}),b=(0,t.Z)(N,2),y=b[0],w=b[1],k=u(),E=(0,t.Z)(k,2),U=E[0],A=E[1],C=A.isLoading,O=A.error,S=A.data,Z=A.isSuccess,P=o(),q=(0,t.Z)(P,2),z=q[0],T=q[1],L=T.isLoading,R=T.error,V=T.isSuccess,W=m(),_=(0,t.Z)(W,2),D=_[0],F=_[1],I=F.isLoading,M=F.error,G=F.isSuccess;(0,r.useEffect)((function(){if("delete"===x){var e=window.confirm("Are you sure you want to delete this user?");console.log(e),e&&D(a)}else"warning"===x&&z(n)}),[x,z,D,n,a]),(0,r.useEffect)((function(){y.status}),[y,a,U]),(0,r.useEffect)((function(){g(""),(O||R||M)&&j.Am.error("".concat(O||R||M),{toastId:"error"}),(Z||V||G)&&(j.Am.success("".concat(Z?"User role updated":V?"Warning was sent to this user":"User was deleted"),{toastId:"success"}),g("defaultValue"),w({status:!1,role:""}))}),[O,Z,V,R,G,M]);return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:(0,v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,v.jsx)("div",{className:"avatar",children:(0,v.jsx)("div",{className:"mask mask-squircle w-12 h-12",children:(0,v.jsx)(h.ZP,{name:l,maxInitials:2,size:50})})}),(0,v.jsx)("div",{children:(0,v.jsx)("div",{className:"font-bold capitalize",children:l})})]})}),(0,v.jsxs)("td",{className:"capitalize",children:[null!==S&&void 0!==S&&S.user.role?S.user.role:i,(0,v.jsx)("br",{}),(0,v.jsx)("span",{className:"badge badge-primary opacity-75 badge-sm",children:"Active User"})]}),(0,v.jsx)("td",{children:n}),(0,v.jsx)("th",{children:"edit"===x?(0,v.jsxs)("div",{className:"flex justify-center items-center",children:[(0,v.jsx)("span",{className:"p-2 rounded-full border-2 border-primary",onClick:function(){return g("")},children:(0,v.jsx)(p.sQZ,{className:"cursor-pointer hover:text-secondary-focus"})}),C?(0,v.jsx)(f.NB,{visible:!0,height:"40",width:"40",ariaLabel:"blocks-loading",wrapperStyle:{},wrapperclassName:"blocks-wrapper",colors:["#e15b64","#f47e60","#f8b26a","#abbd81","#849b87"]}):(0,v.jsxs)("form",{onChange:function(e){console.log(e.target.name),U({id:a,role:e.target.name})},className:"cursor-pointer label",children:[(0,v.jsx)("span",{className:"label-text mx-2",children:"Admin"}),(0,v.jsx)("input",{type:"checkbox",name:"admin",className:"checkbox checkbox-accent"}),(0,v.jsx)("span",{className:"label-text mx-2",children:"Recruiter"}),(0,v.jsx)("input",{name:"recruiter",type:"checkbox",className:"checkbox checkbox-accent"}),(0,v.jsx)("span",{className:"label-text mx-2",children:"Applicant"}),(0,v.jsx)("input",{name:"applicant",type:"checkbox",className:"checkbox checkbox-accent"})]})]}):L||I?(0,v.jsx)("div",{className:"flex text-white justify-center items-center animate-pulse bg-slate-700",children:"Loading..."}):(0,v.jsxs)("select",{onChange:function(e){return g(e.target.value)},className:"".concat("administrator"===i&&"hidden"," select select-ghost"),defaultValue:"defaultValue",children:[(0,v.jsx)("option",{value:"defaultValue",children:"Select Action"}),(0,v.jsx)("option",{value:"delete",className:"text-error cursor-pointer",children:"Delete"}),(0,v.jsx)("option",{value:"warning",className:"text-yellow-400 cursor-pointer",children:"Warning"}),(0,v.jsx)("option",{value:"edit",className:"text-success cursor-pointer",children:"Edit User Role"})]})})]})})},N=function(){var e,s,a=(0,r.useState)(""),n=(0,t.Z)(a,2),i=n[0],c=n[1],o=(0,r.useState)(""),u=(0,t.Z)(o,2),m=u[0],h=u[1],p=(0,r.useState)(""),j=(0,t.Z)(p,2),f=j[0],N=j[1],b=(0,r.useState)(1),y=(0,t.Z)(b,2),w=y[0],k=y[1],E=d({email:m,role:f,page:w,limit:2},{refetchOnMountOrArgChange:!0}),U=E.isLoading,A=E.error,C=E.data;return(0,r.useEffect)((function(){var e=setTimeout((function(){h(i||"")}),1e3);return function(){return clearTimeout(e)}}),[i]),console.log(C),U&&!A?s=(0,v.jsx)(x.Z,{}):A&&!U?s=(0,v.jsx)("tr",{className:"text-xl text-red-500 text-center",children:(0,v.jsx)("td",{children:"There was an error occurred"})}):U||A||0!==(null===C||void 0===C||null===(e=C.users)||void 0===e?void 0:e.length)?null===C||void 0===C||!C.users||U||A||(s=C.users.map((function(e){return(0,v.jsx)(g,{user:e},e._id)}))):s=(0,v.jsx)("tr",{children:(0,v.jsx)("td",{className:"flex items-center justify-center text-xl text-red-400 space-y-3",children:"No users found"})}),console.log(null===C||void 0===C?void 0:C.totalPages),(0,v.jsxs)("div",{className:"m-0 relative md:top-0",children:[(0,v.jsxs)("div",{className:"flex items-center justify-center md:my-14 my-3",children:[(0,v.jsx)(l.$F9,{size:40,className:"mr-2"}),(0,v.jsx)("h2",{className:"md:text-3xl uppercase md:font-extrabold text-xl text-transparent bg-clip-text bg-gradient-to-tr from-primary to-secondary",children:"All Registered Users"})]}),(0,v.jsxs)("div",{className:"flex md:flex-row flex-col items-center md:justify-between md:my-6 my-2 px-2",children:[(0,v.jsxs)("select",{onChange:function(e){return N(e.target.value)},className:"select select-ghost w-full max-w-xs md:my-0 my-3",defaultValue:"",children:[(0,v.jsx)("option",{value:"",children:"Filter User Role"}),(0,v.jsx)("option",{value:"applicant",children:"Applicant"}),(0,v.jsx)("option",{value:"recruiter",children:"Recruiter"})]}),(0,v.jsx)("input",{type:"text",placeholder:"Search by Email",className:"input input-bordered input-primary w-full max-w-xs md:my-0 my-3",name:"search",value:i,onChange:function(e){return c(e.target.value)}})]}),(0,v.jsxs)("div",{className:"overflow-x-auto",children:[(0,v.jsxs)("table",{className:"table table-zebra w-full",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"relative",children:"Name"}),(0,v.jsx)("th",{children:"Role"}),(0,v.jsx)("th",{children:"Email"}),(0,v.jsx)("th",{children:"Action"})]})}),(0,v.jsx)("tbody",{children:s})]}),(0,v.jsxs)("div",{className:"flex justify-center btn-group mt-5",children:[(0,v.jsx)("button",{onClick:function(){return k((function(e){return e>1?e-1:1}))},className:"p-4 bg-gray-400",children:"\xab"}),(0,v.jsxs)("span",{className:"p-4 badge-primary",children:["Page ",null===C||void 0===C?void 0:C.currentPage]}),(0,v.jsx)("button",{onClick:function(){return k((function(e){return e<(null===C||void 0===C?void 0:C.totalPages)?e+1:null===C||void 0===C?void 0:C.totalPages}))},className:"p-4 bg-gray-400",children:"\xbb"})]})]})]})}},3298:function(e,s,a){a(2791);var t=a(184);s.Z=function(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"animate-pulse",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"avatar",children:(0,t.jsx)("div",{className:"mask mask-squircle bg-slate-400 w-12 h-12"})}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)("div",{className:"h-4 px-28 bg-slate-400 rounded"}),(0,t.jsx)("div",{className:"h-3 px-28 bg-slate-400 rounded"})]})})})]})}),(0,t.jsx)("td",{className:"animate-pulse",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)("div",{className:"h-4 px-8 bg-slate-400 rounded"}),(0,t.jsx)("div",{className:"h-3 px-6 bg-slate-400 rounded"})]})}),(0,t.jsx)("td",{className:"animate-pulse",children:(0,t.jsx)("div",{className:"h-4 px-14 bg-slate-400 rounded"})}),(0,t.jsx)("th",{className:"animate-pulse",children:(0,t.jsx)("div",{className:"h-4 px-8 bg-slate-400 rounded"})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"animate-pulse",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"avatar",children:(0,t.jsx)("div",{className:"mask mask-squircle bg-slate-400 w-12 h-12"})}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)("div",{className:"h-4 px-28 bg-slate-400 rounded"}),(0,t.jsx)("div",{className:"h-3 px-28 bg-slate-400 rounded"})]})})})]})}),(0,t.jsx)("td",{className:"animate-pulse",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)("div",{className:"h-4 px-8 bg-slate-400 rounded"}),(0,t.jsx)("div",{className:"h-3 px-6 bg-slate-400 rounded"})]})}),(0,t.jsx)("td",{className:"animate-pulse",children:(0,t.jsx)("div",{className:"h-4 px-14 bg-slate-400 rounded"})}),(0,t.jsx)("th",{className:"animate-pulse",children:(0,t.jsx)("div",{className:"h-4 px-8 bg-slate-400 rounded"})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"animate-pulse",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"avatar",children:(0,t.jsx)("div",{className:"mask mask-squircle bg-slate-400 w-12 h-12"})}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)("div",{className:"h-4 px-28 bg-slate-400 rounded"}),(0,t.jsx)("div",{className:"h-3 px-28 bg-slate-400 rounded"})]})})})]})}),(0,t.jsx)("td",{className:"animate-pulse",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)("div",{className:"h-4 px-8 bg-slate-400 rounded"}),(0,t.jsx)("div",{className:"h-3 px-6 bg-slate-400 rounded"})]})}),(0,t.jsx)("td",{className:"animate-pulse",children:(0,t.jsx)("div",{className:"h-4 px-14 bg-slate-400 rounded"})}),(0,t.jsx)("th",{className:"animate-pulse",children:(0,t.jsx)("div",{className:"h-4 px-8 bg-slate-400 rounded"})})]})]})}},9983:function(e,s,a){a.d(s,{w_:function(){return d}});var t=a(2791),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=t.createContext&&t.createContext(r),n=function(){return n=Object.assign||function(e){for(var s,a=1,t=arguments.length;a<t;a++)for(var r in s=arguments[a])Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);return e},n.apply(this,arguments)},i=function(e,s){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&s.indexOf(t)<0&&(a[t]=e[t]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(t=Object.getOwnPropertySymbols(e);r<t.length;r++)s.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(a[t[r]]=e[t[r]])}return a};function c(e){return e&&e.map((function(e,s){return t.createElement(e.tag,n({key:s},e.attr),c(e.child))}))}function d(e){return function(s){return t.createElement(o,n({attr:n({},e.attr)},s),c(e.child))}}function o(e){var s=function(s){var a,r=e.attr,l=e.size,c=e.title,d=i(e,["attr","size","title"]),o=l||s.size||"1em";return s.className&&(a=s.className),e.className&&(a=(a?a+" ":"")+e.className),t.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,r,d,{className:a,style:n(n({color:e.color||s.color},s.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),c&&t.createElement("title",null,c),e.children)};return void 0!==l?t.createElement(l.Consumer,null,(function(e){return s(e)})):s(r)}}}]);
//# sourceMappingURL=9245.aaf1297d.chunk.js.map